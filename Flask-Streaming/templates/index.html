<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Creative - Start Bootstrap Theme</title>
        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.12.1/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic" rel="stylesheet" type="text/css" />
        <!-- Third party plugin CSS-->
        <link href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css" rel="stylesheet" />
        <!-- Core theme CSS (includes Bootstrap)-->
        <link href="{{ url_for('static', filename='css/styles.css') }}" rel="stylesheet" />
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <script>
      if (!!window.EventSource) {
        var source = new EventSource("/drone_num");
        source.onmessage = function (e) {
          var jbSplit = e.data.split(",");
          for (var i in jbSplit) {
            $("#cam" + i).text(jbSplit[i]);
            var time = new Date();
            var D = 'Date: ' + time.getFullYear() + '-' + (time.getMonth()+1)+ '-' + time.getDate() + ' ' + time.getHours() + ':' + time.getMinutes() + ':' + time.getSeconds();
            $("#timedate").text(D)
            var j = jbSplit[i].split(":");
            parseInt(j[1]);
            if (j[1] != 0) {
              var img = document.getElementById("video" + i);
              img.style.borderColor = "#ffff00";
            } else {
              var img = document.getElementById("video" + i);
              img.style.borderColor = "#ffffff";
            }
          }
        };
      }


      $(document).ready(function (e){

        $(document).on("click",".cam_video",function(){
                $('html').scrollTop(0);      // 스크롤 위로
                $("body").css("overflow", "hidden");  // 스크롤 숨기기
                var path = $(this).attr('src')
                var c = $(this).attr('class')
                var cam = c.split(' ')[1]
                showImage(path, cam)

                
                window.onkeydown = function(){
                  if(event.keyCode == 13){           //엔터키
                    $.ajax({
                      url:'/send_img'
                    });
                  }
                  else if(event.keyCode == 37){      //좌
                    $.ajax({
                      url:'/L/'+ cam
                    });
                  }
                  else if(event.keyCode == 38){      //상
                    $.ajax({
                      url:'/U/'+ cam
                    });
                  }
                  else if(event.keyCode == 39){      //우
                    $.ajax({
                      url:'/R/'+ cam
                    });
                  }
                  else if(event.keyCode == 40){      //하
                    $.ajax({
                      url:'/D/'+ cam
                    });
                  }
                  else if(event.keyCode == 32){      //스페이스바
                    $.ajax({
                      url:'/C/'+ cam
                    });
                  }
                }
                window.onkeyup = function(){
                  event.keyCode = 9;
                }
                
          });//end click event
            
        function showImage(fileCallPath, cam){
            $(".bigPictureWrapper").css("display","flex").show();
            $(".bigPicture")
            .html("<img src='"+fileCallPath+"' >");
        }
            
        $(".bigPicture").on("click", function(e){
            $("body").css("overflow", "scroll");
            setTimeout(function(){
            $('.bigPictureWrapper').hide();
            }, 0);
        });//end bigWrapperClick event

        var check = $("input[type='checkbox']");
        check.click(function(){
          $.ajax({
            url: "/mode_change",
            //async: true
          });
          $(".Auto_text").toggle();
        });
        
      });
    </script>
    <style>
      #drone_data {
        text-align: left;
        font-family: 'Londrina Solid', cursive;
      }
      .bigPictureWrapper {
        position: absolute;
        display: none;
        justify-content: center;
        align-items: center;
        top: 0%;
        width: 100%;
        height: 100%;
        background-color: gray;
        z-index: 100;
        background: rgba(0, 0, 0, 0.9);
      }
      .bigPicture {
        position: relative;
        display: flex;
        justify-content: center;
        align-items: center;
        width: 60%;
        height: 50%;
      }

      .bigPicture img {
        width: 800px;
      }

      .cam_video{
        border: 10px solid;
        margin: 10px;
        border-collapse: separate;
        width: 470px; height: 310px;
      }

      #nav1 {
        margin-left: 20px;
      }

      #nav3 {
        margin-left: 20px;
        margin-right: 20px;
        width: 95%;
      }

      #nav2 {
        margin-bottom: 0px;
      }


      .key{
        display: inline-block;
        color: #aaa;
        font: bold 9pt arial;
        text-decoration: none;
        text-align: center;
        width: 44px;
        height: 41px;
        margin: 5px;
        background: #eff0f2;
        -moz-border-radius: 4px;
        border-radius: 4px;
        border-top: 1px solid #f5f5f5;
        -webkit-box-shadow: 
            inset 0 0 25px #e8e8e8,
            0 1px 0 #c3c3c3,
            0 2px 0 #c9c9c9,
            0 2px 3px #333;
        -moz-box-shadow: 
            inset 0 0 25px #e8e8e8,
            0 1px 0 #c3c3c3,
            0 2px 0 #c9c9c9,
            0 2px 3px #333;
        box-shadow: 
            inset 0 0 25px #e8e8e8,
            0 1px 0 #c3c3c3,
            0 2px 0 #c9c9c9,
            0 2px 3px #333;
        text-shadow: 0px 1px 0px #f5f5f5;
        filter: dropshadow(color=#f5f5f5, offx=0, offy=1);
      }
    
      .exp{
        color: #ffffff;
        font-size: 12px;
      }
      .space {
          width: 18em;
      }

      .Enter{
      width: 10em;
      }
      // colors
    $blue: #269bff;
    $bg-light: #f2f2f2;
    $bg-med: #eee;

    // the magic
    div.checkbox.switcher{
      label {padding: 0;
        *{
            vertical-align: middle;
        }
        input{
          display: none;
          &+span {position: relative; 
                  display: inline-block; 
                  margin-right: 10px; 
                  width: 56px; 
                  height: 28px; 
                  background: $bg-light; 
                  border: 1px solid $bg-med; 
                  border-radius: 50px; 
                  transition: all 0.3s ease-in-out;
            small {
                position: absolute;
                display: block;
                width: 50%;
                height: 100%; 
                background: #fff; 
                border-radius: 50%; 
                transition: all 0.3s ease-in-out;
                left: 0;
                }
          }
          &:checked+span {
            background: $blue;
            border-color: $blue;
            small{
              left: 50%;
            }
          }
        }
      }
    }
          
      .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 34px;
      vertical-align:middle;
    }
        /* Hide default HTML checkbox */
      .switch input {display:none;}

      /* The slider */
      .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        -webkit-transition: .4s;
        transition: .4s;
      }

      .slider:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        -webkit-transition: .4s;
        transition: .4s;
      }

      input:checked + .slider {
        background-color: #2196F3;
      }

      input:focus + .slider {
        box-shadow: 0 0 1px #2196F3;
      }

      input:checked + .slider:before {
        -webkit-transform: translateX(26px);
        -ms-transform: translateX(26px);
        transform: translateX(26px);
      }

      /* Rounded sliders */
      .slider.round {
        border-radius: 34px;
      }

      .slider.round:before {
        border-radius: 50%;
      }

      p {
        margin:0px;
        display:inline-block;
        font-size:15px;
        font-weight:bold;
      }

    #Auto-Mode {
      color: #757575; 
      font-family: 'Lato', sans-serif; 
      font-size: 16px;
    }

    .hd{
        background-image: url('static/asd.jpg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
            padding:260px;
    }
</style>
    </head>
    <body id="page-top">
        <!-- Navigation-->
        <nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" id="mainNav">
            <div class="container">
                <a class="navbar-brand js-scroll-trigger" href="#page-top">A.I Anti-Drone Security streaming</a><button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navbarResponsive">
                    <ul class="navbar-nav ml-auto my-2 my-lg-0">
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#about">About</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#portfolio">Streaming</a></li>
                        <li class="nav-item"><a class="nav-link js-scroll-trigger" href="#contact">Contact</a></li>
                    </ul>
                </div>
            </div>
        </nav>
        <!-- Masthead-->
        <header class=hd>
            <div class="container h-100">
                <div class="row h-100 align-items-center justify-content-center text-center">
                    <div class="col-lg-10 align-self-end">
                        <h1 class="text-uppercase text-white font-weight-bold">#INCLUDE</h1>
                        <hr class="divider my-4" />
                    </div>
                    <div class="col-lg-8 align-self-baseline">
                        <p class="text-white-75 font-weight-light mb-5">컴퓨터 비전과 인공지능을 이용하여 카메라로 Anti-Drone시스템을 구축한 서비스로 
                        실시간으로 웹 상에서 드론을 포착하는 영상을 확인 할 수 있습니다. </p>
                        <a class="btn btn-primary btn-xl js-scroll-trigger" href="#about">about</a>
                    </div>
                </div>
            </div>
        </header>
        <!-- About section-->
        <section class="page-section bg-primary" id="about">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8 text-center">
                        <h2 class="text-white mt-0">Anti-Drone의 개념</h2>
                        <hr class="divider light my-4" />
                        <p class="text-white-50 mb-4">계속해서 발전하는 드론에 대해 방어체계를 구축한 새로운 기술 시스템입니다. </p>
                        <a class="btn btn-light btn-xl js-scroll-trigger" href="#services">자세히 보러가기</a>
                    </div>
                </div>
            </div>
        </section>
        <!-- Services section-->
        <!-- Portfolio section-->
        <section style="background:" id="portfolio">
            <div class="container-fluid p-0">
                <div class="row no-gutters">
                    <div class="row">
        <div class="col-lg-4 col-md-4">
          <img  class="cam_video cam1" id='video0' src="{{ url_for('video_feed', idx = 1)}}">
          <img  class="cam_video cam2" id='video1' src="{{ url_for('video_feed', idx = 2)}}">
        </div>

        <div class="col-lg-4 col-md-4">
          <img class="cam_video cam3" id='video2' src="{{ url_for('video_feed', idx = 3)}}" >
          <img class="cam_video cam4" id='video3' src="{{ url_for('video_feed', idx = 4)}}">
        </div>

        <div class="col-lg-4 col-md-4" id="drone_data">
          <h3 id="cam0"></h3>
          <h3 id="cam1"></h3>
          <h3 id="cam2"></h3>
          <h3 id="cam3"></h3>
          <h3 id="timedate">Date:</h3>
        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Call to action section-->
        
        <!-- Contact section-->
        <section class="page-section" id="contact">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="col-lg-8 text-center">
                        <h2 class="mt-0">Let's Get In Touch!</h2>
                        <hr class="divider my-4" />
                        <p class="text-muted mb-5">Contact us If you have any question? Give us a call or send us an email and we will get back to you as soon as possible!</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-4 ml-auto text-center mb-5 mb-lg-0">
                        <i class="fas fa-phone fa-3x mb-3 text-muted"></i>
                        <div>010-7236-1195</div>
                    </div>
                    <div class="col-lg-4 mr-auto text-center">
                        <i class="fas fa-envelope fa-3x mb-3 text-muted"></i
                        ><!-- Make sure to change the email address in BOTH the anchor text and the link target below!--><a class="d-block" href="mailto:contact@yourwebsite.com">hyeonwoo@naver.com</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Footer-->
        <footer class="bg-light py-5">
            <div class="container"><div class="small text-center text-muted">Copyright © 2020 - Anti-Drone</div></div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
        <!-- Core theme JS-->
        <script src="{{url_for('static', filename = 'js/scripts.js')}}"></script>
        <div class="bigPictureWrapper">                                             <!--큰화면 요소들입니다.-->                      
      <div class="bigPicture"></div>     
        <div class="col-md-4" style="width:250px; height:500px; float:right,top">
          <label class="switch">
            <input type="checkbox">
            <span class="slider round"></span>
          </label>
          <p class="Auto_text">Auto Mode</p><p style="display:none;" class="Auto_text" >Manual Mode</p><br>
          <span href="#" class="key c38" id="up">&#x25B2;</span> <span class = "exp">위로 이동</span><br>
          <a href="#" class="key" id="down"><span>&#x25BC;</span></a><span class = "exp">아래로 이동</span><br>
          <a href="#" class="key" id="left"><span>&#x25C0;</span></a><span class = "exp">왼쪽으로 이동</span><br>
          <a href="#" class="key" id="right"><span>&#x25B6;</span></a><span class = "exp">오른쪽으로 이동</span><br>
          <a href="#" class="key Enter" id="enter"><span>Enter</span></a><span class = "exp">사진 저장</span><br>
          <a href="#" class="key space" id="space"><span>space</span></a><span class = "exp">원점으로 돌아가기</span>
        </div><br>
      </div>   
    </div>
    </body>
</html>
